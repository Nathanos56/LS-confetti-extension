const defaultVals={particleSlider:150,angleSlider:90,spreadSlider:270,velocitySlider:45,decaySlider:.9,gravitySlider:1,driftSlider:0,tickSlider:200,particleSizeSlider:1,burstSlider:5,colorSelector1:"#ff0000",colorSelector2:"#0000ff",colorSelector3:"#00ff00"},applyButton=document.getElementById("applyButton"),resetButton=document.getElementById("resetButton");function getSavedSettings(e){document.querySelectorAll(".form-range").forEach((function(t){var o=document.getElementById(t.id+"Value");t.oninput=function(){o.textContent=this.value},t.dispatchEvent(new Event("input")),t.value=e[t.id]||defaultVals[t.id]||0})),document.querySelectorAll('[role="switch"]').forEach((function(t){t.checked=e[t.id]||!1})),document.querySelectorAll(".form-control-color").forEach((function(t){t.value=e[t.id]||defaultVals[t.id]||"#808080"}))}window.onload=function(){chrome.storage.sync.get("selectedProfile",(function(e){let t=e.selectedProfile;t?chrome.storage.sync.get("profiles",(function(e){getSavedSettings(e.profiles[t])})):getSavedSettings(defaultVals)}))};var profiles={};applyButton.addEventListener("click",(e=>{var t={};document.querySelectorAll('[role="switch"]').forEach((function(e){t[e.id]=e.checked})),document.querySelectorAll(".form-range").forEach((function(e){var o=document.getElementById(e.id+"Value").textContent;t[e.id]=o})),document.querySelectorAll(".form-control-color").forEach((function(e){t[e.id]=e.value}));var o="confetti";profiles[o]=t,chrome.storage.sync.set({profiles},(function(){console.log("Profiles saved")})),chrome.storage.sync.set({selectedProfile:o},(function(){console.log("Selected profile is set to "+o)}))}));